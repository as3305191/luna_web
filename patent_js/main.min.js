var kokoOwl = (function(window, jQuery) {
    if (!window.jQuery) {
        throw new Error("kokoOwl requires jQuery");
    }
    var $ = window.jQuery;
    var _this = this;

    var owl_kokoHero = $("#koko-hero");
    owl_kokoHero.owlCarousel({
        loop: true,
        autoplay: true,
        autoplayTimeout: 25000,
        autoplayHoverPause: true,
        items: 1,
        dots: true,
        animateOut: 'fadeOut',
        autoHeight: true
    });

    var owl_kokoCategoryHero = $("#koko-category-hero");
    owl_kokoCategoryHero.owlCarousel({
        loop: true,
        autoplay: true,
        autoplayTimeout: 25000,
        autoplayHoverPause: true,
        items: 1,
        dots: true,
        animateOut: 'fadeOut',
        autoHeight: true
    });

    var owl_kokoRecordList = $("#koko-record-list");
    owl_kokoRecordList.owlCarousel({
        stagePadding: 100,
        margin: 12,
        dots: true,
        loop: true,
        merge: true,
        lazyLoad: true,
        stagePadding: 2,
        responsive: {
            0: {
                items: 4
            },
            768: {
                items: 5
            },
            992: {
                items: 6
            },
            1046: {
                items: 8
            },
            1200: {
                items: 10
            },
            1400: {
                items: 11
            },
            1600: {
                items: 12
            },
        },
    });

    var owl_Group = $("#koko-hot-product , #koko-push-product ,#koko-sale-product ,#koko-ano-product ,#koko-record-list");
    owl_Group.owlCarousel({
        stagePadding: 100,
        margin: 12,
        dots: true,
        loop: true,
        merge: true,
        lazyLoad: true,
        stagePadding: 2,
        responsive: {
            0: {
                items: 2
            },
            768: {
                items: 3
            },
            992: {
                items: 4
            },
            1046: {
                items: 5
            },
            1200: {
                items: 6
            },
            1400: {
                items: 7
            },
            1600: {
                items: 8
            },
        },
    });

    var owl_kokoDailySpecial = $("#koko-daily-special");
    owl_kokoDailySpecial.owlCarousel({
        stagePadding: 100,
        margin: 12,
        dots: true,
        lazyLoad: true,
        loop: true,
        merge: true,
        stagePadding: 2,
        responsive: {
            0: {
                items: 1
            },
            768: {
                items: 2
            },
            992: {
                items: 3
            },
        },
    });

    var owl_kkokoIndexCategory = $(".koko-index-category");
    owl_kkokoIndexCategory.owlCarousel({
        margin: 8,
        dots: true,
        lazyLoad: true,
        loop: true,
        merge: true,
        stagePadding: 2,
        responsive: {
            0: {
                items: 2
            },
            992: {
                items: 3
            },
            1200: {
                items: 4
            },
        },
    });

    return {
        productSlick: function() {
            var bgProduct = $("#bg-product");
            var smProduct = $("#sm-product");
            var slidesPerPage = 3;
            var syncedSecondary = true;

            bgProduct.owlCarousel({
                responsive: {
                    0: {
                        items: 1
                    },
                },
                slideSpeed: 4000,
                autoplay: false,
                dots: false,
                loop: true,
                responsiveRefreshRate: 200,
            }).on('changed.owl.carousel', syncPosition);

            smProduct.on('initialized.owl.carousel', function() {
                smProduct.find(".owl-item").eq(0).addClass("current");
            }).owlCarousel({
                items: slidesPerPage,
                dots: true,
                margin: 4,
                autoplay: false,
                responsiveRefreshRate: 100
            }).on('changed.owl.carousel', syncPosition2);

            function syncPosition(el) {
                var count = el.item.count - 1;
                var current = Math.round(el.item.index - (el.item.count / 2) - .5);
                smProduct.find(".owl-item").removeClass("current").eq(current).addClass("current");
                var onscreen = smProduct.find('.owl-item.active').length - 1;
                var start = smProduct.find('.owl-item.active').first().index();
                var end = smProduct.find('.owl-item.active').last().index();
            }

            function syncPosition2(el) {
                if (syncedSecondary) {
                    var number = el.item.index;
                    bgProduct.data('owl.carousel').to(number, 100, true);
                }
            }
            smProduct.on("click", ".owl-item", function(e) {
                e.preventDefault();
                var number = $(this).index();
                bgProduct.data('owl.carousel').to(number, 300, true);
            });
        }
    }

}(window, jQuery));

$.fn.extend({
    navMapScroll(active, dataArt) {
        var pageEqClass = {}
        var navEqClass = {}
        var pageList = []
        var navElems = $(this).find('[' + dataArt + ']')
        var thrFn = function(side, time, maxLog) {
            var timeK = null
            var oTime = new Date().getTime()
            var execFn = function() {
                side();
                oTime = new Date().getTime()
            }
            return function() {
                var nTime = new Date().getTime()
                clearTimeout(timeK)
                if (nTime - oTime > maxLog) {
                    execFn()
                } else {
                    timeK = setTimeout(execFn, time)
                }
            }
        }
        var side = thrFn(function() {
            let scrollTop = window.pageYOffset || window.document.documentElement.scrollTop
            for (var k in pageEqClass) {
                var elem = pageEqClass[k]
                var offsetTop = elem.offset().top
                var elemH = elem.outerHeight()
                if (offsetTop - scrollTop <= 0 && offsetTop + elemH - scrollTop > 0) {
                    navEqClass[k].addClass(active)
                } else {
                    navEqClass[k].removeClass(active)
                }
            }
        }, 50, 200)
        navElems.each(function() {
            const $elem = $(this)
            const className = $elem.attr(dataArt)
            const elem = $('#' + className)
            pageList.push(elem)
            pageEqClass[className] = elem
            navEqClass[className] = $elem
        })
        $(window).on('scroll', side)
        navElems.on('click', function() {
            var className = $(this).attr(dataArt);
            $(window).scrollTop(pageEqClass[className].offset().top);
        })
        side();
        return this
    }
});



var kokokaraMain = (function(window, jQuery) {
    if (!window.jQuery) {
        throw new Error("kokokaraMain requires jQuery");
    }
    var $ = window.jQuery;
    var _this = this;
    // console.count();
    // console.log();
    var num = 0;
    var fadeTime = 300;

    /// Shopping Cart Basket
    $('#basketShop').on('click', function() {
        event.stopPropagation();
        var $this = $(this);
        $this.toggleClass('active').parent().next('#basketIn').fadeToggle(fadeTime);
        console.log(event)
    });

    /// Favorite
    $('.btn-favorite').on('click', function() {
        event.stopPropagation();
        var $this = $(this);
        $this.toggleClass('btn-favorite--is-active');

        console.log(event)
    });

    /// Shopping Cart Rt Bage 加入購物車 Animation 及 帶值 ///, .collect-list-item
    $('.addToCart').on('click', function() {
        event.stopPropagation();
        var productCard = $(this).parents('figure.koko-card');

        var position = productCard.offset();
        var scrollTop = document.documentElement.scrollTop + document.body.scrollTop;
        var positionTop = position.top - scrollTop;

        var productImage = productCard.find('img').get(0).src;
        var productName = productCard.find('.p-name').get(0).innerHTML;

        var kokoHeader = $('#koko-header').find('.container');
        kokoHeader.append('<div class="floating-cart"></div>');

        var cart = $('div.floating-cart');
        productCard.clone().appendTo(cart);

        var countNumber = document.getElementById('countCart');
        num++;
        countNumber.innerHTML = num;

        cart.css({
            'top': positionTop + 'px',
            "left": position.left + 'px'
        }).fadeIn('slow').addClass('moveToCart');

        setTimeout(function() {
            kokoHeader.addClass("MakeFloatingCart")
        }, 800);

        setTimeout(function() {
            cart.remove()
            kokoHeader.removeClass("MakeFloatingCart");

            var cartItem = '\
            <li class="cart-item clear-fix">\
                <img src="' + productImage + '" alt="item1">\
                <div class="item-txt-cnt">\
                    <span class="item-name">' + productName + '</span>\
                    <span class="item-price tw">1,000</span>\
                    <span class="item-quantity">Quantity: 01</span>\
                </div>\
                <div class="delete-item"><i class="icon-close"></i>/div>\
            </li>';

            $("#rtCard").append(cartItem);
            $("#rtempty").hide();
            $("#rtCheckBtn").addClass('block');

            $("#rtCard .cart-item").last().find(".delete-item").click(function() {
                num--;
                countNumber.innerHTML = num;
                $(this).parent().fadeOut(300, function() {
                    $(this).remove();
                    if ($("#rtCard .cart-item").size() == 0) {
                        $("#rtempty").fadeIn(500);
                        $("#rtCheckBtn").removeClass('block');
                    }
                })
            });
        }, 1000);

        console.log(event)
    });

    return {
        sideMenuOpen: function(lv1Index, lv2Index) {
            var side_item = $(".menu-list > li").eq(lv1Index);
            var list_header = side_item.find(".menu-list-header");
            var sub_list = list_header.next(".sub-menu-list");

            side_item.addClass("active open");
            list_header.addClass("open").find(".arrow").addClass("show");
            sub_list.slideToggle().find("li").eq(lv2Index).addClass("active");
        },

        menuChange: function(element) {
            $(element).toggleClass("open").parent("li").toggleClass("open active").find("i").toggleClass("show");
        },

        acToggle: function(element) {
            $(element).next().slideToggle(250);
        },

        accordion: function(element) {
            $(element).toggleClass('active').find("i").toggleClass('fa-minus fa-plus')
        },
        // :not(".flatpickr-monthDropdown-months")
        Select: function(select) {
            $('select').each(function() {
                var $this = $(this);

                var $opts = $this.children('option').length;
                var $val = $this.children('option').eq(0).text();

                $this.addClass('hidden')
                    .wrap('<div class="select"></div>')
                    .after('<div class="select-styled"></div>');

                var $styledSelect = $this.parent().find('.select-styled').text($val);

                if ($this.hasClass('selectWhite')) {
                    $styledSelect.addClass('select--white')
                } else if ($this.hasClass('selectCountry')) {
                    $styledSelect.addClass('select--white select--country')
                }

                var $list = $('<ul />', {
                    'class': 'select-options'
                }).insertAfter($styledSelect);

                for (var i = 0; i < $opts; i++) {
                    var opts = $this.children('option');
                    var opt =
                        $('<li />', {
                            text: opts.eq(i).text(),
                            val: opts.eq(i).val()
                        }).appendTo($list);
                }

                $styledSelect.click(function(option) {
                    var $this = $(this);
                    option.stopPropagation();
                    $this.toggleClass('active').next('ul.select-options').toggle();
                    // console.log($styledSelect)
                });

                var $listItems = $list.children('li');
                $listItems.click(function(options) {
                    var $this = $(this);
                    options.stopPropagation();
                    $styledSelect.text($this.text()).removeClass('active').next($list).hide();
                    // Country Select
                    if ($styledSelect.hasClass('select--country')) {
                        /// Base 64 Country Flag ///
                        var icon_TW = ['data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiPgo8cmVjdCB5PSI4NS4zMzciIHN0eWxlPSJmaWxsOiNEODAwMjc7IiB3aWR0aD0iNTEyIiBoZWlnaHQ9IjM0MS4zMjYiLz4KPHJlY3QgeT0iODUuMzM3IiBzdHlsZT0iZmlsbDojMDA1MkI0OyIgd2lkdGg9IjI1NiIgaGVpZ2h0PSIxNzAuNjYzIi8+Cjxwb2x5Z29uIHN0eWxlPSJmaWxsOiNGMEYwRjA7IiBwb2ludHM9IjE4Ni40MzUsMTcwLjY2OSAxNjIuNTU4LDE4MS45IDE3NS4yNzIsMjA1LjAyNSAxNDkuMzQ1LDIwMC4wNjQgMTQ2LjA1OSwyMjYuMjU2ICAgMTI4LDIwNi45OTMgMTA5Ljk0LDIyNi4yNTYgMTA2LjY1NSwyMDAuMDY0IDgwLjcyOCwyMDUuMDI0IDkzLjQ0MiwxODEuODk5IDY5LjU2NSwxNzAuNjY5IDkzLjQ0MiwxNTkuNDM4IDgwLjcyOCwxMzYuMzEzICAgMTA2LjY1NSwxNDEuMjczIDEwOS45NDEsMTE1LjA4MSAxMjgsMTM0LjM0NCAxNDYuMDYsMTE1LjA4MSAxNDkuMzQ1LDE0MS4yNzMgMTc1LjI3MywxMzYuMzEzIDE2Mi41NTgsMTU5LjQzOCAiLz4KPGNpcmNsZSBzdHlsZT0iZmlsbDojMDA1MkI0OyIgY3g9IjEyOCIgY3k9IjE3MC42NzQiIHI9IjI5LjAwNiIvPgo8cGF0aCBzdHlsZT0iZmlsbDojRjBGMEYwOyIgZD0iTTEyOCwxOTAuMDZjLTEwLjY5MiwwLTE5LjM5MS04LjctMTkuMzkxLTE5LjM5MWMwLTEwLjY5Miw4LjctMTkuMzkxLDE5LjM5MS0xOS4zOTEgIGMxMC42OTIsMCwxOS4zOTEsOC43LDE5LjM5MSwxOS4zOTFDMTQ3LjM5MSwxODEuMzYsMTM4LjY5MiwxOTAuMDYsMTI4LDE5MC4wNnoiLz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPC9zdmc+Cg=='];
                        icon_CN = ['data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiPgo8cmVjdCB5PSI4NS4zMzEiIHN0eWxlPSJmaWxsOiNEODAwMjc7IiB3aWR0aD0iNTEyIiBoZWlnaHQ9IjM0MS4zMzciLz4KPGc+Cgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZEQTQ0OyIgcG9pbnRzPSIxNzguOTIzLDE4OS41NjcgMTkzLjU3OSwyMzQuNjc0IDI0MS4wMDgsMjM0LjY3NCAyMDIuNjM3LDI2Mi41NTIgMjE3LjI5NCwzMDcuNjYxICAgIDE3OC45MjMsMjc5Ljc4MiAxNDAuNTUyLDMwNy42NjEgMTU1LjIwOCwyNjIuNTUyIDExNi44MzcsMjM0LjY3NCAxNjQuMjY2LDIzNC42NzQgICIvPgoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGREE0NDsiIHBvaW50cz0iMjcxLjMsMzM5LjU5MyAyNTYuOTEsMzI5LjEzOCAyNDIuNTIyLDMzOS41OTIgMjQ4LjAxNywzMjIuNjc4IDIzMy42MjgsMzEyLjIyMyAgICAyNTEuNDE0LDMxMi4yMjMgMjU2LjkxLDI5NS4zMDcgMjYyLjQwOCwzMTIuMjIzIDI4MC4xOTMsMzEyLjIyMyAyNjUuODA0LDMyMi42NzcgICIvPgoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGREE0NDsiIHBvaW50cz0iMzA4LjgzNywyODcuOTI3IDI5MS4wNTIsMjg3LjkyNyAyODUuNTU2LDMwNC44NDEgMjgwLjA2LDI4Ny45MjggMjYyLjI3MywyODcuOTI3ICAgIDI3Ni42NjQsMjc3LjQ3MiAyNzEuMTY2LDI2MC41NTcgMjg1LjU1NiwyNzEuMDEgMjk5Ljk0NSwyNjAuNTU3IDI5NC40NDksMjc3LjQ3MiAgIi8+Cgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZEQTQ0OyIgcG9pbnRzPSIzMDguODM3LDIyNC4wNjMgMjk0LjQ0OSwyMzQuNTE4IDI5OS45NDQsMjUxLjQzMiAyODUuNTU2LDI0MC45NzkgMjcxLjE2NiwyNTEuNDM0ICAgIDI3Ni42NjQsMjM0LjUxNyAyNjIuMjczLDIyNC4wNjUgMjgwLjA2MSwyMjQuMDYzIDI4NS41NTYsMjA3LjE0NyAyOTEuMDUyLDIyNC4wNjMgICIvPgoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGREE0NDsiIHBvaW50cz0iMjcxLjMsMTcyLjM5NyAyNjUuODA1LDE4OS4zMTMgMjgwLjE5MywxOTkuNzY2IDI2Mi40MDgsMTk5Ljc2NyAyNTYuOTEsMjE2LjY4NCAgICAyNTEuNDE0LDE5OS43NjYgMjMzLjYyOSwxOTkuNzY4IDI0OC4wMTgsMTg5LjMxMiAyNDIuNTIyLDE3Mi4zOTYgMjU2LjkxLDE4Mi44NTEgICIvPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+Cjwvc3ZnPgo='];
                        icon_USA = ['data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiPgo8cmVjdCB5PSI4NS4zMzEiIHN0eWxlPSJmaWxsOiNGMEYwRjA7IiB3aWR0aD0iNTEyIiBoZWlnaHQ9IjM0MS4zMzciLz4KPGc+Cgk8cmVjdCB5PSIxMjcuOTk0IiBzdHlsZT0iZmlsbDojRDgwMDI3OyIgd2lkdGg9IjUxMiIgaGVpZ2h0PSI0Mi42NjMiLz4KCTxyZWN0IHk9IjIxMy4zMzEiIHN0eWxlPSJmaWxsOiNEODAwMjc7IiB3aWR0aD0iNTEyIiBoZWlnaHQ9IjQyLjY2MyIvPgoJPHJlY3QgeT0iMjk4LjY1NyIgc3R5bGU9ImZpbGw6I0Q4MDAyNzsiIHdpZHRoPSI1MTIiIGhlaWdodD0iNDIuNjYzIi8+Cgk8cmVjdCB5PSIzODMuOTk0IiBzdHlsZT0iZmlsbDojRDgwMDI3OyIgd2lkdGg9IjUxMiIgaGVpZ2h0PSI0Mi42NjMiLz4KPC9nPgo8cmVjdCB5PSI4NS4zMzEiIHN0eWxlPSJmaWxsOiMyRTUyQjI7IiB3aWR0aD0iMjU2IiBoZWlnaHQ9IjE4My43OTciLz4KPGc+Cgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRjBGMEYwOyIgcG9pbnRzPSI5OS44MjIsMTYwLjYyNCA5NS42OTksMTczLjMwOCA4Mi4zNjMsMTczLjMwOCA5My4xNTQsMTgxLjE0MyA4OS4wMzEsMTkzLjgyNiAgICA5OS44MjIsMTg1Ljk5MSAxMTAuNjA2LDE5My44MjYgMTA2LjQ4NCwxODEuMTQzIDExNy4yNzUsMTczLjMwOCAxMDMuOTM4LDE3My4zMDggICIvPgoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0YwRjBGMDsiIHBvaW50cz0iMTAzLjkzOCwyMTkuMDggOTkuODIyLDIwNi4zOTcgOTUuNjk5LDIxOS4wOCA4Mi4zNjMsMjE5LjA4IDkzLjE1NCwyMjYuOTE2IDg5LjAzMSwyMzkuNTk5ICAgIDk5LjgyMiwyMzEuNzYzIDExMC42MDYsMjM5LjU5OSAxMDYuNDg0LDIyNi45MTYgMTE3LjI3NSwyMTkuMDggICIvPgoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0YwRjBGMDsiIHBvaW50cz0iNDcuNTc3LDIxOS4wOCA0My40NiwyMDYuMzk3IDM5LjMzNywyMTkuMDggMjYuMDAxLDIxOS4wOCAzNi43OTIsMjI2LjkxNiAzMi42NjksMjM5LjU5OSAgICA0My40NiwyMzEuNzYzIDU0LjI0NSwyMzkuNTk5IDUwLjEyMywyMjYuOTE2IDYwLjkxMiwyMTkuMDggICIvPgoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0YwRjBGMDsiIHBvaW50cz0iNDMuNDYsMTYwLjYyNCAzOS4zMzcsMTczLjMwOCAyNi4wMDEsMTczLjMwOCAzNi43OTIsMTgxLjE0MyAzMi42NjksMTkzLjgyNiA0My40NiwxODUuOTkxICAgIDU0LjI0NSwxOTMuODI2IDUwLjEyMywxODEuMTQzIDYwLjkxMiwxNzMuMzA4IDQ3LjU3NywxNzMuMzA4ICAiLz4KCTxwb2x5Z29uIHN0eWxlPSJmaWxsOiNGMEYwRjA7IiBwb2ludHM9Ijk5LjgyMiwxMTQuODUgOTUuNjk5LDEyNy41MzUgODIuMzYzLDEyNy41MzUgOTMuMTU0LDEzNS4zNzEgODkuMDMxLDE0OC4wNTQgICAgOTkuODIyLDE0MC4yMTggMTEwLjYwNiwxNDguMDU0IDEwNi40ODQsMTM1LjM3MSAxMTcuMjc1LDEyNy41MzUgMTAzLjkzOCwxMjcuNTM1ICAiLz4KCTxwb2x5Z29uIHN0eWxlPSJmaWxsOiNGMEYwRjA7IiBwb2ludHM9IjQzLjQ2LDExNC44NSAzOS4zMzcsMTI3LjUzNSAyNi4wMDEsMTI3LjUzNSAzNi43OTIsMTM1LjM3MSAzMi42NjksMTQ4LjA1NCA0My40NiwxNDAuMjE4ICAgIDU0LjI0NSwxNDguMDU0IDUwLjEyMywxMzUuMzcxIDYwLjkxMiwxMjcuNTM1IDQ3LjU3NywxMjcuNTM1ICAiLz4KCTxwb2x5Z29uIHN0eWxlPSJmaWxsOiNGMEYwRjA7IiBwb2ludHM9IjE1Ni4xODMsMTYwLjYyNCAxNTIuMDYxLDE3My4zMDggMTM4LjcyNSwxNzMuMzA4IDE0OS41MTUsMTgxLjE0MyAxNDUuMzk0LDE5My44MjYgICAgMTU2LjE4MywxODUuOTkxIDE2Ni45NjksMTkzLjgyNiAxNjIuODQ2LDE4MS4xNDMgMTczLjYzNywxNzMuMzA4IDE2MC4zMDEsMTczLjMwOCAgIi8+Cgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRjBGMEYwOyIgcG9pbnRzPSIxNjAuMzAxLDIxOS4wOCAxNTYuMTgzLDIwNi4zOTcgMTUyLjA2MSwyMTkuMDggMTM4LjcyNSwyMTkuMDggMTQ5LjUxNSwyMjYuOTE2ICAgIDE0NS4zOTQsMjM5LjU5OSAxNTYuMTgzLDIzMS43NjMgMTY2Ljk2OSwyMzkuNTk5IDE2Mi44NDYsMjI2LjkxNiAxNzMuNjM3LDIxOS4wOCAgIi8+Cgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRjBGMEYwOyIgcG9pbnRzPSIyMTYuNjYzLDIxOS4wOCAyMTIuNTQ2LDIwNi4zOTcgMjA4LjQyMywyMTkuMDggMTk1LjA4OCwyMTkuMDggMjA1Ljg3NywyMjYuOTE2ICAgIDIwMS43NTUsMjM5LjU5OSAyMTIuNTQ2LDIzMS43NjMgMjIzLjMzMSwyMzkuNTk5IDIxOS4yMDgsMjI2LjkxNiAyMjkuOTk5LDIxOS4wOCAgIi8+Cgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRjBGMEYwOyIgcG9pbnRzPSIyMTIuNTQ2LDE2MC42MjQgMjA4LjQyMywxNzMuMzA4IDE5NS4wODgsMTczLjMwOCAyMDUuODc3LDE4MS4xNDMgMjAxLjc1NSwxOTMuODI2ICAgIDIxMi41NDYsMTg1Ljk5MSAyMjMuMzMxLDE5My44MjYgMjE5LjIwOCwxODEuMTQzIDIyOS45OTksMTczLjMwOCAyMTYuNjYzLDE3My4zMDggICIvPgoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0YwRjBGMDsiIHBvaW50cz0iMTU2LjE4MywxMTQuODUgMTUyLjA2MSwxMjcuNTM1IDEzOC43MjUsMTI3LjUzNSAxNDkuNTE1LDEzNS4zNzEgMTQ1LjM5NCwxNDguMDU0ICAgIDE1Ni4xODMsMTQwLjIxOCAxNjYuOTY5LDE0OC4wNTQgMTYyLjg0NiwxMzUuMzcxIDE3My42MzcsMTI3LjUzNSAxNjAuMzAxLDEyNy41MzUgICIvPgoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0YwRjBGMDsiIHBvaW50cz0iMjEyLjU0NiwxMTQuODUgMjA4LjQyMywxMjcuNTM1IDE5NS4wODgsMTI3LjUzNSAyMDUuODc3LDEzNS4zNzEgMjAxLjc1NSwxNDguMDU0ICAgIDIxMi41NDYsMTQwLjIxOCAyMjMuMzMxLDE0OC4wNTQgMjE5LjIwOCwxMzUuMzcxIDIyOS45OTksMTI3LjUzNSAyMTYuNjYzLDEyNy41MzUgICIvPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+Cjwvc3ZnPgo='];
                        icon_JP = ['data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiPgo8cmVjdCB5PSI4NS4zMzEiIHN0eWxlPSJmaWxsOiNGMEYwRjA7IiB3aWR0aD0iNTEyIiBoZWlnaHQ9IjM0MS4zMzciLz4KPGNpcmNsZSBzdHlsZT0iZmlsbDojRDgwMDI3OyIgY3g9IjI1NiIgY3k9IjI1NS45OTQiIHI9Ijk2Ii8+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+Cjwvc3ZnPgo='];
                        icon_KR = ['data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiPgo8cmVjdCB5PSI4NS4zMzEiIHN0eWxlPSJmaWxsOiNGRkZGRkY7IiB3aWR0aD0iNTEyIiBoZWlnaHQ9IjM0MS4zMzciLz4KPHBhdGggc3R5bGU9ImZpbGw6I0Q4MDAyNzsiIGQ9Ik0zMTguMzMsMjU1Ljk5NGMwLDE1LjU4My0yNy45MDYsNTQuNTM5LTYyLjMzLDU0LjUzOXMtNjIuMzMtMzguOTU3LTYyLjMzLTU0LjUzOSAgYzAtMzQuNDI0LDI3LjkwNi02Mi4zMyw2Mi4zMy02Mi4zM1MzMTguMzMsMjIxLjU3LDMxOC4zMywyNTUuOTk0eiIvPgo8cGF0aCBzdHlsZT0iZmlsbDojMDA1MkI0OyIgZD0iTTMxOC4zMywyNTUuOTk0YzAsMzQuNDI0LTI3LjkwNiw2Mi4zMy02Mi4zMyw2Mi4zM3MtNjIuMzMtMjcuOTA2LTYyLjMzLTYyLjMzIi8+CjxyZWN0IHg9IjMyNC4yMDUiIHk9IjMwMC41NSIgdHJhbnNmb3JtPSJtYXRyaXgoMC43MDcxIC0wLjcwNzEgMC43MDcxIDAuNzA3MSAtMTE5LjY1MDEgMzI3LjgyMjQpIiB3aWR0aD0iMjMuMzc0IiBoZWlnaHQ9IjE1LjU4MiIvPgo8cmVjdCB4PSIyOTYuNjU3IiB5PSIzMjguMDg1IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjcwNzEgLTAuNzA3MSAwLjcwNzEgMC43MDcxIC0xNDcuMTg4OSAzMTYuNDA4KSIgd2lkdGg9IjIzLjM3NCIgaGVpZ2h0PSIxNS41ODIiLz4KPHJlY3QgeD0iMzU3LjI2IiB5PSIzMzMuNTg2IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjcwNzEgLTAuNzA3MSAwLjcwNzEgMC43MDcxIC0xMzMuMzI3NyAzNjAuODcxOSkiIHdpZHRoPSIyMy4zNzQiIGhlaWdodD0iMTUuNTgyIi8+CjxyZWN0IHg9IjMyOS43MTIiIHk9IjM2MS4xNDMiIHRyYW5zZm9ybT0ibWF0cml4KDAuNzA3MSAtMC43MDcxIDAuNzA3MSAwLjcwNzEgLTE2MC44ODIzIDM0OS40NjQpIiB3aWR0aD0iMjMuMzc0IiBoZWlnaHQ9IjE1LjU4MiIvPgo8cmVjdCB4PSIzNDAuNzMyIiB5PSIzMTcuMDY4IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjcwNzEgLTAuNzA3MSAwLjcwNzEgMC43MDcxIC0xMjYuNDg4OSAzNDQuMzQ3MikiIHdpZHRoPSIyMy4zNzQiIGhlaWdodD0iMTUuNTgyIi8+CjxyZWN0IHg9IjMxMy4xODUiIHk9IjM0NC42MTQiIHRyYW5zZm9ybT0ibWF0cml4KDAuNzA3MSAtMC43MDcxIDAuNzA3MSAwLjcwNzEgLTE1NC4wMzU2IDMzMi45MzYpIiB3aWR0aD0iMjMuMzc0IiBoZWlnaHQ9IjE1LjU4MiIvPgo8cmVjdCB4PSIzMDcuNDgzIiB5PSIxNjUuNTU1IiB0cmFuc2Zvcm09Im1hdHJpeCgtMC43MDcxIC0wLjcwNzEgMC43MDcxIC0wLjcwNzEgNDU1LjUzNDQgNTM1LjM4MTQpIiB3aWR0aD0iNjIuMzMiIGhlaWdodD0iMTUuNTgyIi8+CjxyZWN0IHg9IjI5Ni42NTYiIHk9IjE2OC4zMTUiIHRyYW5zZm9ybT0ibWF0cml4KC0wLjcwNzEgLTAuNzA3MSAwLjcwNzEgLTAuNzA3MSA0MDEuODQ4NiA1MTguNjYyNCkiIHdpZHRoPSIyMy4zNzQiIGhlaWdodD0iMTUuNTgxIi8+CjxyZWN0IHg9IjMyNC4xOTMiIHk9IjE5NS44NjQiIHRyYW5zZm9ybT0ibWF0cml4KC0wLjcwNzEgLTAuNzA3MSAwLjcwNzEgLTAuNzA3MSA0MjkuMzc2MyA1ODUuMTYzNikiIHdpZHRoPSIyMy4zNzQiIGhlaWdodD0iMTUuNTgxIi8+CjxyZWN0IHg9IjMyOS42OTMiIHk9IjEzNS4yNTciIHRyYW5zZm9ybT0ibWF0cml4KC0wLjcwNzEgLTAuNzA3MSAwLjcwNzEgLTAuNzA3MSA0ODEuNjIwNiA0ODUuNTkxKSIgd2lkdGg9IjIzLjM3NCIgaGVpZ2h0PSIxNS41ODIiLz4KPHJlY3QgeD0iMzU3LjI1MiIgeT0iMTYyLjgwNyIgdHJhbnNmb3JtPSJtYXRyaXgoLTAuNzA3MSAtMC43MDcxIDAuNzA3MSAtMC43MDcxIDUwOS4xODYzIDU1Mi4xMDgpIiB3aWR0aD0iMjMuMzc0IiBoZWlnaHQ9IjE1LjU4MiIvPgo8cmVjdCB4PSIxMjUuNjcxIiB5PSIzNDcuMzY5IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjcwNzEgMC43MDcxIC0wLjcwNzEgMC43MDcxIDI5Ny4wNzIxIC02Ljg3NTgpIiB3aWR0aD0iNjIuMzMiIGhlaWdodD0iMTUuNTgyIi8+CjxyZWN0IHg9IjE3NS40MzUiIHk9IjM0NC42MiIgdHJhbnNmb3JtPSJtYXRyaXgoMC43MDcxIDAuNzA3MSAtMC43MDcxIDAuNzA3MSAzMDMuOTk4MyAtMjkuMDk2MikiIHdpZHRoPSIyMy4zNzQiIGhlaWdodD0iMTUuNTgxIi8+CjxyZWN0IHg9IjE0Ny44OTgiIHk9IjMxNy4wNzIiIHRyYW5zZm9ybT0ibWF0cml4KDAuNzA3MSAwLjcwNzEgLTAuNzA3MSAwLjcwNzEgMjc2LjQ1NDcgLTE3LjY5MzQpIiB3aWR0aD0iMjMuMzc0IiBoZWlnaHQ9IjE1LjU4MiIvPgo8cmVjdCB4PSIxNTguNzI0IiB5PSIzMTQuMzIyIiB0cmFuc2Zvcm09Im1hdHJpeCgwLjcwNzEgMC43MDcxIC0wLjcwNzEgMC43MDcxIDI4My4zODYgLTM5LjkyNjkpIiB3aWR0aD0iNjIuMzMiIGhlaWdodD0iMTUuNTgyIi8+CjxyZWN0IHg9IjEyNS42NzIiIHk9IjE0OS4wMjMiIHRyYW5zZm9ybT0ibWF0cml4KC0wLjcwNzEgMC43MDcxIC0wLjcwNzEgLTAuNzA3MSAzNzguNjIxMiAxNTYuNzk4NykiIHdpZHRoPSI2Mi4zMyIgaGVpZ2h0PSIxNS41ODIiLz4KPHJlY3QgeD0iMTQyLjE4MiIgeT0iMTY1LjU2IiB0cmFuc2Zvcm09Im1hdHJpeCgtMC43MDcxIDAuNzA3MSAtMC43MDcxIC0wLjcwNzEgNDE4LjQ5OTggMTczLjM1MzYpIiB3aWR0aD0iNjIuMzMiIGhlaWdodD0iMTUuNTgyIi8+CjxyZWN0IHg9IjE1OC43MTIiIHk9IjE4Mi4wODkiIHRyYW5zZm9ybT0ibWF0cml4KC0wLjcwNzEgMC43MDcxIC0wLjcwNzEgLTAuNzA3MSA0NTguNDA0MyAxODkuODgxMikiIHdpZHRoPSI2Mi4zMyIgaGVpZ2h0PSIxNS41ODEiLz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPC9zdmc+Cg=='];
                        icon_VN = ['data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiPgo8cG9seWdvbiBzdHlsZT0iZmlsbDojRDgwMDI3OyIgcG9pbnRzPSIxOTYuNjQxLDg1LjMzNyAwLDg1LjMzNyAwLDQyNi42NjMgMTk2LjY0MSw0MjYuNjYzIDUxMiw0MjYuNjYzIDUxMiw4NS4zMzcgIi8+Cjxwb2x5Z29uIHN0eWxlPSJmaWxsOiNGRkRBNDQ7IiBwb2ludHM9IjI1NiwxNTcuMjc5IDI3OC42NjMsMjI3LjAyNiAzNTIsMjI3LjAyNiAyOTIuNjY4LDI3MC4xMzIgMzE1LjMzMiwzMzkuODgxIDI1NiwyOTYuNzc0ICAgMTk2LjY2OCwzMzkuODgxIDIxOS4zMzIsMjcwLjEzMiAxNjAsMjI3LjAyNiAyMzMuMzM3LDIyNy4wMjYgIi8+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+Cjwvc3ZnPgo='];

                        var countryCode = $this.val();
                        if (countryCode === 1) {
                            $styledSelect[0].style.backgroundImage = "url(\' " + icon_TW + " \')"
                        } else if (countryCode == 2) {
                            $styledSelect[0].style.backgroundImage = "url(\' " + icon_CN + " \')";
                        } else if (countryCode === 4) {
                            $styledSelect[0].style.backgroundImage = "url(\' " + icon_USA + " \')"
                        } else if (countryCode === 8) {
                            $styledSelect[0].style.backgroundImage = "url(\' " + icon_JP + " \')"
                        } else if (countryCode === 16) {
                            $styledSelect[0].style.backgroundImage = "url(\' " + icon_KR + " \')"
                        } else if (countryCode === 32) {
                            $styledSelect[0].style.backgroundImage = "url(\' " + icon_VN + " \')"
                        }
                    }
                });

            });
            return false;
        },

        spinnyBtn: function(spinnyBtn) {
            $('.number-spinner .spinnyBtn').on('click', function() {
                event.stopPropagation();
                var btn = $(this);

                var oldValue = btn.closest('.number-spinner').find('input').val().trim();
                var newVal = 0;

                if (btn.attr('data-dir') === 'up') {
                    newVal = parseInt(oldValue) + 1;
                } else if (btn.attr('data-dir') === 'dwn') {
                    newVal = parseInt(oldValue) - 1;
                }
                if (oldValue == 0) {
                    kokokaraMain.removeItem(this);
                }
                btn.closest('.number-spinner').find('input').val(newVal).trigger("change");
            });

        },

        removeItem: function(removeItem) {
            var productRow = $(removeItem).parents('.product-row');
            productRow.slideUp(fadeTime);
        },

        updateItem: function(quantityUpdate) {
            var _this = $(quantityUpdate);
            var productRow = _this.parents('li.product-row');

            var price = parseFloat(productRow.children('div.product-price').text());
            var quantity = _this.val();
            var subtotal = price * quantity;

            productRow.children('.product-line-price').each(function() {
                $(this).find('font').fadeOut(fadeTime).text(subtotal.toFixed(2)).fadeIn(fadeTime);
            });
            var taxRate = .05;
            var tax = subtotal * taxRate;
            var total = subtotal + tax;

            $('.totals-item div.totals-value').fadeOut(fadeTime, function() {
                $('#cart-tax').html(tax.toFixed(2));
                $('#cart-subtotal').html(subtotal.toFixed(2));
                $('#cart-total').html(total.toFixed(2));
                $('.totals-item div.totals-value').fadeIn(fadeTime);
            });


        },

        moduleCnt: function(event) {
            if (event == "firtSet") {
                var el = [
                    '<form class="lightbox-primary" id="firtSet">',
                    '   <h6 class="fy-title">請選擇 <font class="text--primary">職場霸凌</font> / <font class="text--primary">收貨地</font> 和 <font class="text--primary">參考幣別</font></h6>',
                    '   <div class="fy-cnt">',
                    '       <div class="form-group mt-12">',
                    '           <label>請選擇職場霸凌</label>',
                    '           <div class="choose_wrap">',
                    '               <input type="radio" name="language" id="zh-TW">',
                    '               <label class="" for="zh-TW">中文(繁體)</label>',
                    '               <input type="radio" name="language" id="zh-CN">',
                    '               <label class="" for="zh-CN">中文(簡體)</label>',
                    '               <input type="radio" name="language" id="en">',
                    '               <label class="" for="en">ENGLISH</label>',
                    '               <input type="radio" name="language" id="jp">',
                    '               <label class="" for="jp">日本語</label>',
                    '               <input type="radio" name="language" id="ko">',
                    '               <label class="" for="ko">한국어</label>',
                    '               <input type="radio" name="language" id="qn">',
                    '               <label class="" for="qn">Quốc Ngữ</label>',
                    '           </div>',
                    '       </div>',
                    '       <div class="form-group">',
                    '           <label>請選擇收貨地</label>',
                    '           <select name="region" id="region">',
                    '               <option value="1">亞洲</option>',
                    '           </select>',
                    '           <select name="country" id="country">',
                    '               <option value="1">台灣</option>',
                    '           </select>',
                    '       </div>',
                    '       <div class="form-group">',
                    '           <label>請選擇幣別</label>',
                    '           <select name="currency" id="currency">',
                    '               <option value="1">新台幣</option>',
                    '           </select>',
                    '       </div>',
                    '   </div>',
                    '   <div class="fy-bt-tools">',
                    '       <button type="button" class="btn btn--primary">保 存 設 定</button>',
                    '   </div>',
                    '</form>'
                ].join('');
                return el;
            } else if (event == "") {
                var el = [].join('');
                return el;
            }
        },

        fancyboxModule: function(event) {
            $.fancybox.open({
                animationEffect: "zoom-in-out",
                animationDuration: 500,
                src: kokokaraMain.moduleCnt(event),
                type: 'html',
                touch: false
            });
        },

        noticeToast: function(txt, type, time) {
            var time = isNaN(time) ? 3E3 : time;
            var toast = document.createElement("div");
            if (type === "success") {
                toast.className = 'toast toast--info';
                toast.innerHTML = '<i class="fa fa-check-circle text--48 block" aria-hidden="true"></i>' + txt;
            } else if (type === "error") {
                toast.className = 'toast toast--error';
                toast.innerHTML = '<i class="fa fa-times-circle text--48 block" aria-hidden="true"></i>' + txt;
            }
            document.body.appendChild(toast);
            setTimeout(function() {
                toast.style.webkitTransition =
                    "-webkit-transform .25s ease-in,opacity .25s ease-in";
                toast.style.opacity = "0";
                setTimeout(function() {
                    document.body.removeChild(toast)
                }, 500)
            }, time, type)
        }


    }
}(window, jQuery));

$(window).on('load', function() {
    kokokaraMain.Select();

});

$(function() {

    $('#searchInputBox').on('focus blur', searchToggle);

    function searchToggle() {
        $("#searchLog").slideToggle(150);
    }

    // Go Top
    // $.KoGoTo.init('.js-go-to');

    kokokaraMain.spinnyBtn();
    // 全站 Header
    $("#header").scrollToFixed({
        preFixed: function() {
            $(this).css('opacity', '.95');
        },
    });
    $("#guiHeader").scrollToFixed({
        preFixed: function() {
            $(this).css('opacity', '.95');
        },
    });
    // 結帳頁 Header
    $("#headerCheck").scrollToFixed({
        maxWidth: 768,
        preFixed: function() {
            $(this).css('opacity', '.95');
        },
    });
    // Cart_1_Check
    $('#ct_checkRtBox').scrollToFixed({
        minWidth: 768,
        marginTop: 12,
        limit: function() {
            var limit = $('.koko-push-product').offset().top - ($('#ct_checkRtBox').outerHeight() + $('header').outerHeight() + 64);
            return limit;
        },
        zIndex: 999
    });
    // Cart_2_Checkout
    $('#s1_checkRtBox').scrollToFixed({
        minWidth: 768,
        marginTop: 12,
        zIndex: 999,
    });
    // Cart_3_agCheckout
    $('#s2_checkRtBox').scrollToFixed({
        minWidth: 768,
        marginTop: 12,
        limit: function() {
            var limit = $('.koko-footer').offset().top - ($('#s2_checkRtBox').outerHeight() + $('header').outerHeight() + 64);
            return limit;
        },
        zIndex: 999
    });

    // categories.html
    $("#categoriesList").scrollToFixed({
        marginTop: $('#header').outerHeight() + 12,
        limit: function() {
            var limit = $('.koko-categories-blcok').outerHeight() - ($('#categoriesList').outerHeight() + $('#header').outerHeight()) + $('.koko-top-banner').outerHeight() + $('.breadcrumbs').outerHeight();
            return limit;
        },
        zIndex: 999
    });
    // searchBox
    $('#searchInputIcon').on('click', function() {
        $('.site-search').toggleClass('search-visible');
        $('#searchClose').on('click', function() {
            $('.site-search').removeClass('search-visible');
        });
    });

    // 常見問題 && 使用導覽左邊 選單.menu-list-header
    $('#menu_Gd').find('li a.menu-list-header').on('click', function() {
        event.stopPropagation();
        kokokaraMain.acToggle(this);
        kokokaraMain.menuChange(this);

        console.log(event)

    });

    /* Cart 1 Check btn change */
    $('.product-quantity').find('input').on('change', function() {
        event.stopPropagation();
        kokokaraMain.updateItem(this);

        console.log(event)

    });

    $('.product-removal').find('button.btn').on('click', function() {
        event.stopPropagation();
        kokokaraMain.removeItem(this);

        console.log(event)

    });

    $(".member-menu").find('li.active').on('click', function() {
        event.stopPropagation();
        var $this = $(this);
        $this.find('.icon-arrow-down').toggleClass('up');;
        $this.siblings().toggleClass('show');

        console.log(event)

    });

});